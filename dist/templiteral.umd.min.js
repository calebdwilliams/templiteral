(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?t(exports):typeof define==="function"&&define.amd?define(["exports"],t):t(e.templit={})})(this,function(e){"use strict";const t=/---!\{.*\}!---/gi;const n=/^\(.*\)$/gi;const s=/^\[.*\]$/;const o=/^this\./;const i=/---!\{/gi;const a=/\}!---/gi;class c{constructor(e,t){this.node=e;this.index=t}cleanUp(){this.node.textContent=this.node.textContent.replace(i,"").replace(a,"")}update(e){if(this.node.nodeValue!==e.node.nodeValue){this.node.nodeValue=e.node.nodeValue}}}class r{constructor(e,t,n,s,o){this.node=e;this.index=t;this.boundAttrs=n;this.boundEvents=s;this.context=o;this.addListeners()}addListeners(){this.boundEvents.forEach((e,t)=>{const n=e.split(/;/);const s=n.filter(e=>e.match(o));const i=s.join("; ");if(e.match(o)){const e=new Function(i).bind(this.context);this.node.addEventListener(t,e);this.node._boundEvents=e}if(s.length<n.length){console.warn("Inline functions not allowed inside of event bindings. Unsafe functions have been removed from node",this.node)}})}cleanUp(){this.boundAttrs.forEach(e=>e.value=e.value.replace(i,"").replace(a,""))}update(e){this.boundAttrs.forEach(t=>{const n=e.boundAttrs.get(t.name);n&&t.value!==n.value?t.value=n.value:null;if(t.name.match(s)){this.updateAttributes(t.name,n)}})}updateAttributes(e,t){const n=e.slice(1,-1);if(t.value){this.node[n]=t.value;this.node.setAttribute(n,t.value)}else{this.node.removeAttribute(n)}}}class l{constructor(e,t,n){const s=document.createElement("template");const o=e.replace(i,"").replace(a,"");s.innerHTML=o;this.parts=new Map;this.templiteralParts=new Set;this.eventHandlers=[];this.location=t;this.context=n;this._init(e)}disconnect(){this.eventHandlers.forEach((e,t)=>{const n=this.eventHandlers[t].currentNode;n.removeEventListener(e,n._boundEvents)})}paint(e){this.location.appendChild(e)}update(e){const t=document.createElement("template");t.innerHTML=e;const n=document.importNode(t.content,true);const s=document.createTreeWalker(n,133,null,false);this._parseUpdates(s)}_parseUpdates(e){const t=this._walk(e,new Map,false);this.parts.forEach((e,n)=>e.update(t.get(n)))}_init(e){const t=document.createElement("template");t.innerHTML=e;const n=document.importNode(t.content,true);const s=document.createTreeWalker(n,133,null,false);this._walk(s,this.parts,true);this.paint(n)}_walk(e,o,i){let a=-1;while(e.nextNode()){a+=1;const{currentNode:l}=e;if(!l.__templiteralCompiler){switch(l.nodeType){case 1:{const{attributes:e}=l;if(e.length){const c=new Map;const d=new Map;for(let o=0;o<e.length;o+=1){const a=e[o];if(a.value.match(t)||a.name.match(s)){c.set(a.name,a)}if(i&&a.name.match(n)){const e=a.name.substring(1,a.name.length-1);d.set(e,a.value);this.eventHandlers.push({eventName:e,currentNode:l})}}if(c.size>=1||d.size>=1||this.parts.has(a)){const e=new r(l,a,c,d,this.context);o.set(a,e);e.cleanUp()}}break}case 3:{if(l.textContent&&l.textContent.match(t)||this.parts.has(a)){const e=new c(l,a);o.set(a,e);e.cleanUp()}break}}}else{this.templiteralParts.add(l)}}return o}}const d=new Map;function u(e){return function(t,...n){const s=t.map((e,t)=>`${e?e:""}${n[t]?"---!{"+n[t]+"}!---":""}`).join("");const o=btoa(t.join(""));let i=d.get(o);if(i){i.update(s)}else{i=new l(s,e,this);d.set(o,i)}e.__templiteralCompiler=i;return i}}function h(e,t=this){function n(...n){const s=Reflect.apply(u,t,[e]);return Reflect.apply(s,t,n)}return n.bind(t)}function p(e){e.forEach(e=>customElements.define(e.tagName,e))}e.templiteral=h;e.registerElements=p;Object.defineProperty(e,"__esModule",{value:true})});