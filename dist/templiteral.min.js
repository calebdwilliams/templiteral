var templit=function(t){"use strict";const e=/---!{.*?(}!---)/gi;const s=/^\(.*\)$/gi;const i=/^\[.*\]$/;const n=/---!\{/gi;const o=/\}!---/gi;const a=/t-model/gi;const r=Symbol("t-model");class c{constructor(t,s){this.node=t;this.compiler=s;this.base=t.nodeValue||"";this.indicies=this.base.match(e).map(t=>+t.replace(n,"").replace(o,""));this.indicies.forEach(t=>this.compiler.partIndicies.set(t,this))}set value(t){const s=this.base.replace(e,t);this.value!==s?this.node.nodeValue=s:null}get value(){return this.node.nodeValue}setValue(t=[]){this.node.nodeValue=this.base.replace(/---!{*.}!---/g,e=>t[+e.replace(n,"").replace(o,"")])}update(t){this.node.nodeValue=this.base.replace(/---!{*.}!---/g,e=>{const s=t[+e.replace(n,"").replace(o,"")];return s===null?"":s})}}class h{constructor(t,s,i,a,r){this.node=t;this.boundAttrs=s;this.boundEvents=i;this.context=a;this.compiler=r;this.boundAttrs.forEach(t=>{t.base=t.value;const s=t.base.match(e)||[];this.indicies=s.map(t=>+t.replace(n,"").replace(o,""));this.indicies.forEach(t=>this.compiler.partIndicies.set(t,this))});this.addListeners()}addListeners(){this.boundEvents.forEach((t,e)=>{if(e===r){this.context[t]=this.context[t]?this.context[t]:undefined;this.node.value=this.context[t];this.node.addEventListener("input",this._modelFunction(t));this.node.addEventListener("change",this._modelFunction(t))}else{const s=t.replace(/(this\.)|(\(.*\))/gi,"");if(typeof this.context[s]!=="function"){console.error(`Method ${s} is not a method of element ${this.context.tagName}`)}else{const t=this.context[s].bind(this.context);this.node.addEventListener(e,t);this.node._boundEvents=t}}})}updateProperty(t,e){const s=t.name.replace(/\[|\]/g,"");this.node[s]=e;if(e&&(e!=="false"&&e!=="undefined")){this.node.setAttribute(s,e)}else{this.node[s]=false;this.node.removeAttribute(s)}}update(t){this.boundAttrs.forEach(e=>{const s=e.base.match(/---!{*.}!---/g)||[];const n=s.map(t=>+t.replace("---!{","").replace("}!---",""));let o=e.base;if(n.length===1){o=o.replace(`---!{${n[0]}}!---`,t[n[0]])}else if(n.length>1){for(let e=0;e<n.length;e+=1){const s=t[n[e]]||"";o=o.replace(`---!{${n[e]}}!---`,s)}}e.value=o;if(e.name.match(i)){if(n.length===1){o=t[n[0]]}this.updateProperty(e,o)}})}_modelFunction(t){const{context:e}=this;return function(){e[t]=this.value}}}class l{constructor(t,e,s,i){this.strings=t;this.values=e;this.oldValues=e.map((t,e)=>`---!{${e}}!---`);this.location=s;this.context=i;this.parts=[];this.partIndicies=new Map;this.context.$el=s;this.eventHandlers=[];this._init()}_append(t){for(let t=0;t<this.parts.length;t+=1){const e=this.parts[t];if(e instanceof c){e.setValue(this.values,this.oldValues[t])}else if(e instanceof h){e.update(this.values,this.oldValues)}}this.location.appendChild(t)}_init(){const t=this.strings.map((t,e)=>`${t?t:""}${this.values[e]!==undefined?"---!{"+e+"}!---":""}`).join("");const e=document.createElement("template");e.innerHTML=t;const s=document.importNode(e.content,true);const i=document.createTreeWalker(s,133,null,false);this._walk(i,this.parts,true);this._append(s)}_walk(t,n){this.context.refs=this.context.refs||{};while(t.nextNode()){const{currentNode:o}=t;if(!o.__templiteralCompiler){switch(o.nodeType){case 1:{const{attributes:t}=o;if(t.length){const c=new Map;const l=new Map;for(let n=0;n<t.length;n+=1){const h=t[n];if(h.value.match(e)||h.name.match(i)){c.set(h.name,h)}else if(h.name.match(s)){const t=h.name.substring(1,h.name.length-1);l.set(t,h.value);this.eventHandlers.push({eventName:t,currentNode:o})}else if(h.name.match(a)){l.set(r,h.value)}else if(h.name.match("ref")){this.context.refs[h.value]=o}}if(c.size>=1||l.size>=1){const t=new h(o,c,l,this.context,this);n.push(t)}}break}case 3:{if(o.textContent&&o.textContent.match(e)){const t=new c(o,this);n.push(t)}break}}}else{this.templiteralParts.add(o)}}}update(t){this.oldValues=this.values;this.values=t;for(let e=0;e<t.length;e+=1){if(t[e]!==this.oldValues[e]){window.requestAnimationFrame(()=>{try{this.partIndicies.get(e).update(t)}catch(s){console.log(this.partIndicies.get(e),e,t[e])}})}}}}class d extends HTMLElement{constructor(){super();this.templiteral=m}connectedCallback(){this._render()}_render(){this.templiteral()(this.items.map(this.templatecallback()))}}if(!customElements.get("t-repeat")){customElements.define("t-repeat",d)}class u extends HTMLElement{constructor(){super();this.cached=[]}connectedCallback(){this.style.display="contents"}set condition(t){if(t===false){Array.from(this.children).map(t=>{this.cached.push(t);this.removeChild(t)});this.innerHTML=""}else if(t===true){this.cached.forEach(t=>this.appendChild(t));this.cached=[]}}}if(!customElements.get("t-if")){customElements.define("t-if",u)}const p=new WeakMap;function m(t=this,e=this){t.shadowRoot?t=t.shadowRoot:null;return(s,...i)=>{let n=p.get(t);if(n){n.update(i)}else{n=new l(s,i,t,e);p.set(t,n)}return n}}class f extends HTMLElement{static get boundAttributes(){return[]}static get observedAttributes(){return[...this.boundAttributes]}constructor(){super();const t=this;this.constructor.boundAttributes.forEach(t=>{Object.defineProperty(this,t,{get(){return this.getAttribute(t)},set(e){if(e){this.setAttribute(t,e)}else{this.removeAttribute(t)}if(this.constructor.renderer&&typeof this[this.constructor.renderer]==="function"){this[this.constructor.renderer]()}}})});Object.defineProperty(this,"templiteral",{get(){const e=t.shadowRoot?t.shadowRoot:t;return m(e,t)},enumerable:false,configurable:false});Object.defineProperty(this,"html",{enumerable:false,get(){return(...e)=>{window.requestAnimationFrame(()=>Reflect.apply(t.templiteral,t,e))}}})}attributeChangedCallback(t,e,s){if(e!==s){this[t]=s}}connectedCallback(){if(this.constructor.renderer&&typeof this[this.constructor.renderer]==="function"){this[this.constructor.renderer]()}}disconnectedCallback(){p.delete(this)}}t.templiteral=m;t.Component=f;return t}({});